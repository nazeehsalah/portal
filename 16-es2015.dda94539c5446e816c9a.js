(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{LGSf:function(n,e,l){"use strict";l.r(e);var t=l("8Y7J");class i{}var o=l("pMnS"),u=l("ZZ/e"),a=l("iInd"),s=l("SVse");class r{}var d=t["\u0275crt"]({encapsulation:2,styles:[],data:{}});function c(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,1,"ion-router-outlet",[],null,null,null,null,null)),t["\u0275did"](1,212992,null,0,u.ib,[a.b,t.ViewContainerRef,t.ComponentFactoryResolver,[8,null],[8,null],u.d,u.Ib,s.Location,t.ElementRef,a.m,t.NgZone,a.a,[3,u.ib]],null,null)],(function(n,e){n(e,1,0)}),null)}function p(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-icu-cases",[],null,null,null,c,d)),t["\u0275did"](1,49152,null,0,r,[],null,null)],null,null)}var g=t["\u0275ccf"]("app-icu-cases",r,p,{},{},[]),h=l("fNgX"),m=l("Nv++"),f=l("cUpR"),C=l("oBH4"),b=l("jc40"),v=l("EUE+"),_=l("oBZk"),R=l("wa3g"),I=l("L56a"),O=l("RXyF"),y=l("Czxz"),w=l("7LN8"),M=l("c3oE"),N=l("z0+7"),P=l("mrSG"),x=l("wvkU"),S=l("hydD");class E{constructor(n,e,l,t,i){this.modalContr=n,this.shared=e,this.utils=l,this.activatedRoute=t,this.odoo=i,this.filterList=[],this.configData={},this.selectObj={unitCode:"",hospitalCode:"",paitentNum:"",ssitype:"",univCode:""},this.hospitals=[],this.units=[]}ngOnInit(){this.shared.userData.subscribe(n=>{this.configData.user_hospitals=n.allowed_hospital,this.units=n.allowed_units.filter(n=>n.type===this.type),1==this.configData.user_hospitals.length&&(this.selectObj.hospitalCode=this.configData.user_hospitals[0].id,this.selectObj.univCode=this.configData.user_hospitals[0].univers),1==this.units.length&&(this.selectObj.unitCode=this.units[0].id)})}add(){"SSI"==this.type&&(localStorage.setItem("SSIType",this.selectObj.ssitype),"outpatient"==this.selectObj.ssitype&&(this.selectObj.unitCode=!1)),this.utils.units=this.units,console.log(this.selectObj),this.modalContr.dismiss({addData:this.selectObj})}close(){this.modalContr.dismiss()}onHospitalChange(){let n=this.type;"Needle"==this.type&&(n="ICU");let e=this.configData.user_hospitals.find(n=>n.id==this.selectObj.hospitalCode);e&&(this.selectObj.univCode=e.univers);let l=this.configData.user_hospitals.filter(n=>n.id==this.selectObj.hospitalCode);this.units=l.length>0?l[0].hosp_units.filter(e=>e.type===n):this.configData.user_units.filter(e=>e.type===n)}onUnivCodeChange(){this.hospitals=this.configData.user_hospitals.filter(n=>n.univers==this.selectObj.univCode)}}class k{constructor(n,e,l,t,i,o,u,a){this.util=n,this.alertController=e,this.navController=l,this.modalCont=t,this.activeRoute=i,this.odoo=o,this.shared=u,this.alertContrl=a,this.newIcuList=[],this.limitPerPage=20,this.page=0,this.fabConfig={horizontalPosition:"end",verticalPostition:"bottom",icon:"plus",iconFamily:"fal"},this.$subs=[],this.loading=!0,this.totalCount=0}ngOnInit(){}ionViewWillEnter(){this.type=this.activeRoute.snapshot.paramMap.get("type"),this.getCount()}getList(){this.util.showSpinner(),this.odoo.getSurveillanceCases(this.type,this.page*this.limitPerPage,this.limitPerPage).subscribe(n=>{this.util.hideSpinner(),this.loading=!1,this.newIcuList=n.data})}getCount(){this.util.showSpinner(),this.odoo.getSurveillanceCasesCount(this.type).subscribe(n=>{this.util.hideSpinner(),this.totalCount=n.data,setTimeout(()=>this.getList(),100)})}onFabClicked(){return P.__awaiter(this,void 0,void 0,(function*(){const n=yield this.modalCont.create({component:E,cssClass:"modal-class",backdropDismiss:!0,componentProps:{type:this.type}});return n.onDidDismiss().then(n=>{null!=n.data&&(this.selectedInfo=n.data.addData,this.selectedInfo.type=this.type,this.navController.navigateForward(`/home/icu/add/${this.selectedInfo.type}/${this.selectedInfo.paitentNum}/${this.selectedInfo.hospitalCode}/${this.selectedInfo.unitCode}?univ=${this.selectedInfo.univCode}`))}),yield n.present()}))}openCase(n){this.navController.navigateForward(`/home/icu/edit-by-id/${n.survey_type}/${n.id}`)}loadDataOnScroll(n){this.limitPerPage=n.rows,this.page=n.first/this.limitPerPage,this.getList()}deleteAlert(n,e){return P.__awaiter(this,void 0,void 0,(function*(){e.stopPropagation();const l=yield this.alertContrl.create({header:"Confirm",message:"Are You sure to delete this case",buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"OK",handler:()=>{this.util.showSpinner(),this.odoo.deleteSurveillanceCase(n.id).subscribe(n=>{this.util.hideSpinner(),n.data?this.util.showAlert("OK","case deleted successfully"):this.util.showAlert("Error","Error in delete cases"),console.log(n)})}}]});yield l.present()}))}destroy(){this.$subs.forEach(n=>n.unsubscribe())}ionViewWillLeave(){this.destroy()}ngOnDestroy(){this.destroy()}}var T=t["\u0275crt"]({encapsulation:0,styles:[[".icu-list[_ngcontent-%COMP%]{padding:10px}.p-input-icon-right[_ngcontent-%COMP%]{display:-webkit-box;display:flex;gap:.5rem;-webkit-box-align:center;align-items:center;-webkit-box-pack:end;justify-content:end}.leave-content-div[_ngcontent-%COMP%]{padding-inline:1rem;padding-block:.5rem}  body .ui-paginator .ui-dropdown,   body .ui-paginator .ui-dropdown .ui-dropdown-label,   body .ui-paginator .ui-dropdown .ui-dropdown-trigger{background-color:transparent!important}  .ui-table table{min-width:100%;width:auto}  body .ui-table .ui-table-tbody>tr>td{padding:2px 4px;font-size:12px}  body .ui-table .ui-table-thead>tr>th{padding:2px 4px;border:1px solid #c8c8c8;font-weight:700;color:#333;background-color:#f4f4f4;text-align:start;font-size:14px}.actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:100%;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;color:#d03000!important}"]],data:{}});function D(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,15,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Patient Name "])),(n()(),t["\u0275eld"](3,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Patient No "])),(n()(),t["\u0275eld"](5,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Hospital group"])),(n()(),t["\u0275eld"](7,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Hospital"])),(n()(),t["\u0275eld"](9,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Unit name"])),(n()(),t["\u0275eld"](11,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Infection Type"])),(n()(),t["\u0275eld"](13,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Infection Date"])),(n()(),t["\u0275eld"](15,0,null,null,0,"th",[],null,null,null,null,null))],null,null)}function q(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,19,"tr",[["class","p-selectable-row"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.openCase(n.context.$implicit)&&t),t}),null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "])),(n()(),t["\u0275eld"](3,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,[" "," "])),(n()(),t["\u0275eld"](5,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,[" "," "])),(n()(),t["\u0275eld"](7,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](8,null,[" "," "])),(n()(),t["\u0275eld"](9,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](10,null,[" "," "])),(n()(),t["\u0275eld"](11,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](12,null,[" "," "])),(n()(),t["\u0275eld"](13,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](14,null,[" "," "])),(n()(),t["\u0275eld"](15,0,null,null,4,"td",[],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==l.stopPropagation()&&t),t}),null,null)),(n()(),t["\u0275eld"](16,0,null,null,3,"div",[["class","actions"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.deleteAlert(n.context.$implicit,l)&&t),t}),null,null)),(n()(),t["\u0275eld"](17,0,null,null,2,"fa-icon",[["class","ng-fa-icon"],["slot","start"]],[[1,"title",0],[8,"innerHTML",1]],null,null,h.d,h.c)),t["\u0275did"](18,573440,null,0,m.c,[f.b,m.a,m.d,[2,m.i]],{icon:[0,"icon"]},null),t["\u0275pad"](19,2)],(function(n,e){var l=n(e,19,0,"fas","trash");n(e,18,0,l)}),(function(n,e){n(e,2,0,e.context.$implicit.patient_name),n(e,4,0,e.context.$implicit.num),n(e,6,0,e.context.$implicit.University[1]),n(e,8,0,e.context.$implicit.Hospital[1]),n(e,10,0,e.context.$implicit.unit_name[1]),n(e,12,0,e.context.$implicit.inf_type?e.context.$implicit.inf_type:""),n(e,14,0,e.context.$implicit.doi?e.context.$implicit.doi:""),n(e,17,0,t["\u0275nov"](e,18).title,t["\u0275nov"](e,18).renderedIconHTML)}))}function j(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"tr",[["style","text-align: center; min-height: 20vh;"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"td",[["colspan","8"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["No Cases found."]))],null,null)}function V(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-header-card",[],null,null,null,C.b,C.a)),t["\u0275did"](1,114688,null,0,b.a,[v.a],{headerTitle:[0,"headerTitle"],search:[1,"search"]},null),(n()(),t["\u0275eld"](2,0,null,null,19,"ion-content",[],null,null,null,_.I,_.h)),t["\u0275prd"](512,null,s["\u0275NgClassImpl"],s["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](4,278528,null,0,s.NgClass,[s["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),t["\u0275did"](5,49152,null,0,u.u,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](6,0,null,0,1,"app-fab",[],null,[[null,"fabClicked"]],(function(n,e,l){var t=!0;return"fabClicked"===e&&(t=!1!==n.component.onFabClicked()&&t),t}),R.b,R.a)),t["\u0275did"](7,114688,null,0,I.a,[v.a],{config:[0,"config"]},{fabClicked:"fabClicked"}),(n()(),t["\u0275eld"](8,0,null,0,11,"div",[["class","leave-content-div"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,10,"p-table",[["paginatorDropdownAppendTo","body"]],null,[[null,"onPage"]],(function(n,e,l){var t=!0;return"onPage"===e&&(t=!1!==n.component.loadDataOnScroll(l)&&t),t}),O.b,O.a)),t["\u0275prd"](512,null,y.TableService,y.TableService,[]),t["\u0275did"](11,5488640,[["dt",4]],1,y.Table,[t.ElementRef,t.NgZone,y.TableService,t.ChangeDetectorRef],{paginator:[0,"paginator"],rowsPerPageOptions:[1,"rowsPerPageOptions"],paginatorDropdownAppendTo:[2,"paginatorDropdownAppendTo"],lazy:[3,"lazy"],loading:[4,"loading"],value:[5,"value"],rows:[6,"rows"],totalRecords:[7,"totalRecords"]},{onPage:"onPage"}),t["\u0275qud"](603979776,1,{templates:1}),t["\u0275pad"](13,4),(n()(),t["\u0275and"](0,null,null,1,null,D)),t["\u0275did"](15,16384,[[1,4]],0,w.PrimeTemplate,[t.TemplateRef],{name:[0,"name"]},null),(n()(),t["\u0275and"](0,null,null,1,null,q)),t["\u0275did"](17,16384,[[1,4]],0,w.PrimeTemplate,[t.TemplateRef],{name:[0,"name"]},null),(n()(),t["\u0275and"](0,null,null,1,null,j)),t["\u0275did"](19,16384,[[1,4]],0,w.PrimeTemplate,[t.TemplateRef],{name:[0,"name"]},null),(n()(),t["\u0275eld"](20,0,null,0,1,"app-footer",[],null,null,null,M.b,M.a)),t["\u0275did"](21,114688,null,0,N.a,[],null,null)],(function(n,e){var l=e.component;n(e,1,0,"Surveillance cases",!1),n(e,4,0,l.util.isModal),n(e,7,0,l.fabConfig);var t=n(e,13,0,20,50,100,200);n(e,11,0,!0,t,"body",!0,l.loading,l.newIcuList,l.limitPerPage,l.totalCount),n(e,15,0,"header"),n(e,17,0,"body"),n(e,19,0,"emptymessage"),n(e,21,0)}),null)}function $(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-icu-list",[],null,null,null,V,T)),t["\u0275did"](1,245760,null,0,k,[v.a,u.a,u.Ib,u.Hb,a.a,S.a,x.a,u.a],null,null)],(function(n,e){n(e,1,0)}),null)}var L=t["\u0275ccf"]("app-icu-list",k,$,{},{},[]),A=l("KJz2"),H=l("HOR0"),Z=l("dC/y"),U=t["\u0275crt"]({encapsulation:0,styles:[[".inputItem[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-right:2px;font-size:1rem;margin-bottom:5px;white-space:normal}.inputItem[_ngcontent-%COMP%]   .label-stacked[_ngcontent-%COMP%]{-webkit-transform:none!important;transform:none!important}.inputItem[_ngcontent-%COMP%]   .child-label[_ngcontent-%COMP%]{color:var(--background-color)!important;font-weight:700!important}.inputItem[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#000;padding:5px}.inputItem[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--ion-color-primary:var(--background-color)}"]],data:{}});function F(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"p",[["class","error"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" Error Message: "," "]))],null,(function(n,e){n(e,1,0,e.component.question.error)}))}function z(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"ion-item",[["class","inputItem"],["detail","false"]],null,null,null,_.N,_.m)),t["\u0275did"](1,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["\u0275eld"](2,0,null,0,2,"ion-label",[["appTranslate",""],["class","addInput-Label child-label"],["position","stacked"]],null,null,null,_.O,_.n)),t["\u0275did"](3,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{position:[0,"position"]},null),t["\u0275did"](4,4210688,null,0,A.a,[t.ElementRef,t.Renderer2,s.DOCUMENT],{text:[0,"text"],text_ar:[1,"text_ar"]},null),(n()(),t["\u0275eld"](5,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),t["\u0275ted"](6,null,["",""])),(n()(),t["\u0275and"](16777216,null,0,1,null,F)),t["\u0275did"](8,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,1,0,"false"),n(e,3,0,"stacked"),n(e,4,0,l.question.text,l.question.ar_title?l.question.ar_title:""),n(e,8,0,l.question.error)}),(function(n,e){n(e,6,0,e.component.question.answer)}))}var B=l("e9AG"),Q=l("dCPe"),G=l("225H"),K=t["\u0275crt"]({encapsulation:0,styles:[[".inputItem[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-right:2px;font-size:1rem;margin-bottom:5px;white-space:normal;opacity:1!important}.inputItem[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-top:1rem;margin-bottom:1rem}.inputItem[_ngcontent-%COMP%]   .label-stacked[_ngcontent-%COMP%]{-webkit-transform:none!important;transform:none!important}.inputItem[_ngcontent-%COMP%]   .child-label[_ngcontent-%COMP%]{color:var(--background-color)!important;font-weight:700!important}.inputItem[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#000;padding:5px}.inputItem[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--ion-color-primary:var(--background-color)}"]],data:{}});function Y(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(n,e){var l=e.component;n(e,0,0,l.sanitizer.bypassSecurityTrustUrl("data:image/png;base64, "+l.question.image))}))}function J(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"p",[["class","error"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" Error Message: "," "]))],null,(function(n,e){n(e,1,0,e.component.question.error)}))}function W(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,13,"ion-item",[["class","inputItem"],["detail","false"]],null,null,null,_.N,_.m)),t["\u0275did"](1,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["\u0275eld"](2,0,null,0,4,"ion-label",[["appTranslate",""],["class","addInput-Label child-label"],["position","stacked"]],null,null,null,_.O,_.n)),t["\u0275did"](3,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{position:[0,"position"]},null),t["\u0275did"](4,4210688,null,0,A.a,[t.ElementRef,t.Renderer2,s.DOCUMENT],{text:[0,"text"],text_ar:[1,"text_ar"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,Y)),t["\u0275did"](6,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](7,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),t["\u0275ted"](8,null,["",""])),(n()(),t["\u0275and"](16777216,null,0,1,null,J)),t["\u0275did"](10,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](11,0,null,0,2,"ion-button",[],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.openModal()&&t),t}),_.C,_.b)),t["\u0275did"](12,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{disabled:[0,"disabled"]},null),(n()(),t["\u0275ted"](-1,0,[" Choose "]))],(function(n,e){var l=e.component;n(e,1,0,"false"),n(e,3,0,"stacked"),n(e,4,0,l.question.text,l.question.ar_title?l.question.ar_title:""),n(e,6,0,l.question.image),n(e,10,0,l.question.error),n(e,12,0,l.disable)}),(function(n,e){n(e,8,0,e.component.question.answer)}))}var X=l("0x5+"),nn=l("F8Ee"),en=l("PRTE"),ln=l("mWIq"),tn=l("9p1T"),on=l("Uzms"),un=l("s7LF"),an=l("dKEL"),sn=t["\u0275crt"]({encapsulation:0,styles:[[".inputItem[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-right:2px;font-size:1rem;margin-bottom:5px;white-space:normal;opacity:1!important}.inputItem[_ngcontent-%COMP%]   .label-stacked[_ngcontent-%COMP%]{-webkit-transform:none!important;transform:none!important}.inputItem[_ngcontent-%COMP%]   .child-label[_ngcontent-%COMP%]{color:var(--background-color)!important;font-weight:700!important}.inputItem[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{color:#000;padding:5px}"]],data:{}});function rn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"p",[["class","error"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" Error Message: "," "]))],null,(function(n,e){n(e,1,0,e.component.question.error)}))}function dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,13,"ion-item",[["class","inputItem"],["detail","false"]],null,null,null,_.N,_.m)),t["\u0275did"](1,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["\u0275eld"](2,0,null,0,2,"ion-label",[["appTranslate",""],["class","addInput-Label child-label"],["position","stacked"]],null,null,null,_.O,_.n)),t["\u0275did"](3,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{position:[0,"position"]},null),t["\u0275did"](4,4210688,null,0,A.a,[t.ElementRef,t.Renderer2,s.DOCUMENT],{text:[0,"text"],text_ar:[1,"text_ar"]},null),(n()(),t["\u0275eld"](5,0,null,0,6,"ion-datetime",[["class","addInput"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],(function(n,e,l){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==t["\u0275nov"](n,6)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t["\u0275nov"](n,6)._handleChangeEvent(l.target)&&i),"ngModelChange"===e&&(i=!1!==(o.answer=l)&&i),"ionChange"===e&&(i=!1!==o.changeDate()&&i),i}),_.J,_.i)),t["\u0275did"](6,16384,null,0,u.Mb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,un.NG_VALUE_ACCESSOR,(function(n){return[n]}),[u.Mb]),t["\u0275did"](8,671744,null,0,un.NgModel,[[8,null],[8,null],[8,null],[6,un.NG_VALUE_ACCESSOR]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,un.NgControl,null,[un.NgModel]),t["\u0275did"](10,16384,null,0,un.NgControlStatus,[[4,un.NgControl]],null,null),t["\u0275did"](11,49152,null,0,u.v,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{disabled:[0,"disabled"],displayFormat:[1,"displayFormat"],pickerFormat:[2,"pickerFormat"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,rn)),t["\u0275did"](13,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,1,0,"false"),n(e,3,0,"stacked"),n(e,4,0,l.question.text,l.question.ar_title?l.question.ar_title:""),n(e,8,0,l.disable,l.answer),n(e,11,0,l.disable,l.format,l.format),n(e,13,0,l.question.error)}),(function(n,e){n(e,5,0,t["\u0275nov"](e,10).ngClassUntouched,t["\u0275nov"](e,10).ngClassTouched,t["\u0275nov"](e,10).ngClassPristine,t["\u0275nov"](e,10).ngClassDirty,t["\u0275nov"](e,10).ngClassValid,t["\u0275nov"](e,10).ngClassInvalid,t["\u0275nov"](e,10).ngClassPending)}))}var cn=l("ooga"),pn=t["\u0275crt"]({encapsulation:0,styles:[[".estimates-timeline[_ngcontent-%COMP%]{position:relative;max-width:1200px;margin:0 auto;min-height:100px}.estimates-timeline[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--background-color)}.estimates-timeline[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{left:0;right:0}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]{position:relative;background-color:inherit}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]{background:#eee;padding:0;margin:10px;box-shadow:-7px 10px 6px 1px rgba(0,0,0,.14)}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{--ion-item-background:#eee;--ion-item-color:var(--background-color);font-weight:700}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .completed[_ngcontent-%COMP%]{--ion-item-background:#5db12c!important;--ion-item-color:#fff}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .completed[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .section-active[_ngcontent-%COMP%]{--ion-item-background:var(--background-color);--ion-item-color:#fff;font-weight:700}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .section-active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .list-padding[_ngcontent-%COMP%]{padding:10px!important}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .slide-item[_ngcontent-%COMP%]{--detail-icon-color:rgb(254, 156, 69);--detail-icon-opacity:1;--inner-padding-end:8px}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .slide-item[_ngcontent-%COMP%]   .estimates-content[_ngcontent-%COMP%]{top:0;padding:10px;width:100%}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .slide-item[_ngcontent-%COMP%]   .estimates-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#949494}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .accordion-list[_ngcontent-%COMP%]{padding-bottom:5px;padding-top:5px}.estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .accordion-list[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%], .estimates-timeline[_ngcontent-%COMP%]   .estimates-container[_ngcontent-%COMP%]   .estimates-list[_ngcontent-%COMP%]   .accordion-list[_ngcontent-%COMP%]   .section-active[_ngcontent-%COMP%]{--min-height:58px}.estimates-timeline[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--ion-color-primary:#fff;border-radius:50px;border:1px solid var(--background-color);color:var(--background-color)}.estimates-timeline[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-left:10px;color:#d03000;font-weight:700;font-size:24px}.estimates-timeline[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}"]],data:{}});function gn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ion-icon",[["name","add"],["slot","start"]],null,null,null,_.L,_.k)),t["\u0275did"](1,49152,null,0,u.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"add")}),null)}function hn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ion-icon",[["name","close"],["slot","start"]],null,null,null,_.L,_.k)),t["\u0275did"](1,49152,null,0,u.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"close")}),null)}function mn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-isolate-number-questions",[],null,[[null,"onChange"]],(function(n,e,l){var t=!0;return"onChange"===e&&(t=!1!==n.component.onChange(l)&&t),t}),z,U)),t["\u0275did"](1,114688,null,0,H.a,[x.a,Z.a],{question:[0,"question"],type:[1,"type"],hospitalCode:[2,"hospitalCode"],unitCode:[3,"unitCode"]},{onChange:"onChange"})],(function(n,e){var l=e.component;n(e,1,0,l.questions[e.parent.parent.context.$implicit],l.type,l.hospitalCode,l.unitCode)}),null)}function fn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-text-question",[],null,[[null,"onChange"]],(function(n,e,l){var t=!0;return"onChange"===e&&(t=!1!==n.component.onChange(l)&&t),t}),B.b,B.a)),t["\u0275did"](1,245760,null,0,Q.a,[v.a],{question:[0,"question"],disable:[1,"disable"]},{onChange:"onChange"})],(function(n,e){n(e,1,0,e.component.questions[e.parent.parent.context.$implicit],"Infection type"==e.parent.parent.parent.parent.parent.context.$implicit.text)}),null)}function Cn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-drop-dwon-question",[],null,[[null,"onChange"]],(function(n,e,l){var t=!0;return"onChange"===e&&(t=!1!==n.component.onChange(l)&&t),t}),W,K)),t["\u0275did"](1,245760,null,0,G.a,[u.Hb,f.b,v.a],{question:[0,"question"],type:[1,"type"],disable:[2,"disable"]},{onChange:"onChange"})],(function(n,e){var l=e.component;n(e,1,0,l.questions[e.parent.parent.context.$implicit],l.type,"Infection type"==e.parent.parent.parent.parent.parent.context.$implicit.text)}),null)}function bn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-integer-question",[],null,[[null,"onChange"]],(function(n,e,l){var t=!0;return"onChange"===e&&(t=!1!==n.component.onChange(l)&&t),t}),X.b,X.a)),t["\u0275did"](1,245760,null,0,nn.a,[f.b,v.a],{question:[0,"question"],disable:[1,"disable"]},{onChange:"onChange"})],(function(n,e){n(e,1,0,e.component.questions[e.parent.parent.context.$implicit],"Infection type"==e.parent.parent.parent.parent.parent.context.$implicit.text)}),null)}function vn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-selection-question",[],null,[[null,"onChange"]],(function(n,e,l){var t=!0;return"onChange"===e&&(t=!1!==n.component.onChange(l)&&t),t}),en.b,en.a)),t["\u0275did"](1,245760,null,0,ln.a,[f.b,v.a],{question:[0,"question"],disable:[1,"disable"]},{onChange:"onChange"})],(function(n,e){n(e,1,0,e.component.questions[e.parent.parent.context.$implicit],"Infection type"==e.parent.parent.parent.parent.parent.context.$implicit.text)}),null)}function _n(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-date-question",[],null,[[null,"onChange"]],(function(n,e,l){var t=!0;return"onChange"===e&&(t=!1!==n.component.onChange(l)&&t),t}),tn.b,tn.a)),t["\u0275did"](1,245760,null,0,on.a,[v.a],{question:[0,"question"],format:[1,"format"],disable:[2,"disable"]},{onChange:"onChange"})],(function(n,e){n(e,1,0,e.component.questions[e.parent.parent.context.$implicit],"YYYY-MM-DD","Infection type"==e.parent.parent.parent.parent.parent.context.$implicit.text)}),null)}function Rn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-time-question",[],null,[[null,"onChange"]],(function(n,e,l){var t=!0;return"onChange"===e&&(t=!1!==n.component.onChange(l)&&t),t}),dn,sn)),t["\u0275did"](1,245760,null,0,an.a,[v.a],{question:[0,"question"],disable:[1,"disable"]},{onChange:"onChange"})],(function(n,e){n(e,1,0,e.component.questions[e.parent.parent.context.$implicit],"Infection type"==e.parent.parent.parent.parent.parent.context.$implicit.text)}),null)}function In(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,22,"div",[["class"," left"]],null,null,null,null,null)),t["\u0275prd"](512,null,s["\u0275NgClassImpl"],s["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](2,278528,null,0,s.NgClass,[s["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](3,{"d-none":0}),(n()(),t["\u0275eld"](4,0,null,null,18,"ion-list",[["class",""],["style","animation-delay:2s"]],null,null,null,_.Q,_.o)),t["\u0275did"](5,49152,null,0,u.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](6,0,null,0,16,"ion-item",[["class","slide-item"],["detail","false"]],null,null,null,_.N,_.m)),t["\u0275did"](7,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["\u0275eld"](8,0,null,0,14,"div",[["class","estimates-content"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,mn)),t["\u0275did"](10,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,fn)),t["\u0275did"](12,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Cn)),t["\u0275did"](14,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,bn)),t["\u0275did"](16,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,vn)),t["\u0275did"](18,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,_n)),t["\u0275did"](20,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Rn)),t["\u0275did"](22,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component,t=n(e,3,0,"isolate_no"===l.questions[e.parent.context.$implicit].questionType);n(e,2,0," left",t),n(e,7,0,"false"),n(e,10,0,"isolate_no"===l.questions[e.parent.context.$implicit].questionType),n(e,12,0,"real"===l.questions[e.parent.context.$implicit].questionType),n(e,14,0,"drop_list"===l.questions[e.parent.context.$implicit].questionType),n(e,16,0,"integer"===l.questions[e.parent.context.$implicit].questionType),n(e,18,0,"List"===l.questions[e.parent.context.$implicit].questionType),n(e,20,0,"date"===l.questions[e.parent.context.$implicit].questionType),n(e,22,0,"time"===l.questions[e.parent.context.$implicit].questionType)}),null)}function On(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,In)),t["\u0275did"](2,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,2,0,l.questions[e.context.$implicit].show&&(null==l.questions[e.context.$implicit]?null:l.questions[e.context.$implicit].headerIndex)==e.parent.parent.parent.context.$implicit.index)}),null)}function yn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"ion-list",[],null,null,null,_.Q,_.o)),t["\u0275did"](1,49152,null,0,u.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](2,0,null,0,1,"h3",[["class","no-data"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["No Question for this header"]))],null,null)}function wn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,5,"ion-list",[["class","list-padding"]],null,null,null,_.Q,_.o)),t["\u0275did"](1,49152,null,0,u.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275and"](16777216,null,0,1,null,On)),t["\u0275did"](3,278528,null,0,s.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,yn)),t["\u0275did"](5,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,3,0,l.objectKeys(l.selectedQuestionObj)),n(e,5,0,0==l.objectKeys(l.selectedQuestionObj).length)}),null)}function Mn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,16,"ion-list",[["class","estimates-list"],["detail","false"],["lines","none"],["no-padding",""]],[[8,"id",0]],null,null,_.Q,_.o)),t["\u0275did"](1,49152,null,0,u.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{lines:[0,"lines"]},null),t["\u0275did"](2,16384,null,0,u.e,[t.ElementRef],null,null),(n()(),t["\u0275eld"](3,0,null,0,11,"ion-item",[["class","accordion-list"],["tappable",""]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.toggleSection(n.parent.context.index)&&t),t}),_.N,_.m)),t["\u0275prd"](512,null,s["\u0275NgClassImpl"],s["\u0275NgClassR2Impl"],[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2]),t["\u0275did"](5,278528,null,0,s.NgClass,[s["\u0275NgClassImpl"]],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](6,{completed:0,"section-active":1,section:2}),t["\u0275did"](7,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275and"](16777216,null,0,1,null,gn)),t["\u0275did"](9,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,hn)),t["\u0275did"](11,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](12,0,null,0,2,"ion-label",[["appTranslate",""]],null,null,null,_.O,_.n)),t["\u0275did"](13,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),t["\u0275did"](14,4210688,null,0,A.a,[t.ElementRef,t.Renderer2,s.DOCUMENT],{text:[0,"text"],text_ar:[1,"text_ar"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,wn)),t["\u0275did"](16,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){n(e,1,0,"none");var l=n(e,6,0,e.parent.context.$implicit.allSolved,e.parent.context.$implicit.open,!e.parent.context.$implicit.open);n(e,5,0,"accordion-list",l),n(e,9,0,!e.parent.context.$implicit.open),n(e,11,0,e.parent.context.$implicit.open),n(e,14,0,e.parent.context.$implicit.text,e.parent.context.$implicit.ar_title?e.parent.context.$implicit.ar_title:""),n(e,16,0,e.parent.context.$implicit.open)}),(function(n,e){n(e,0,0,t["\u0275inlineInterpolate"](1,"",e.parent.context.index,""))}))}function Nn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[],[[8,"className",0]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Mn)),t["\u0275did"](2,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){n(e,2,0,!e.context.$implicit.empty)}),(function(n,e){n(e,0,0,"estimates-container left")}))}function Pn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["save survey"]))],null,null)}function xn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Back"]))],null,null)}function Sn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"fa-icon",[["class","ng-fa-icon"],["slot","start"]],[[1,"title",0],[8,"innerHTML",1]],null,null,h.d,h.c)),t["\u0275did"](1,573440,null,0,m.c,[f.b,m.a,m.d,[2,m.i]],{icon:[0,"icon"]},null),t["\u0275pad"](2,2)],(function(n,e){var l=n(e,2,0,"fal","check");n(e,1,0,l)}),(function(n,e){n(e,0,0,t["\u0275nov"](e,1).title,t["\u0275nov"](e,1).renderedIconHTML)}))}function En(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"ion-button",[["class","save-btn"],["expand","block"],["shape","round"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.submitRequest(!0)&&t),t}),_.C,_.b)),t["\u0275did"](1,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{expand:[0,"expand"],shape:[1,"shape"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,Pn)),t["\u0275did"](3,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,xn)),t["\u0275did"](5,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,Sn)),t["\u0275did"](7,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,1,0,"block","round"),n(e,3,0,!l.isSubmit),n(e,5,0,l.isSubmit),n(e,7,0,!l.isSubmit)}),null)}function kn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","estimates-timeline"],["id","content-div"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Nn)),t["\u0275did"](2,278528,null,0,s.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275eld"](3,0,null,null,5,"ion-row",[],null,null,null,_.T,_.s)),t["\u0275did"](4,49152,null,0,u.jb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](5,0,null,0,3,"ion-col",[["class","nav-content"],["size","12"]],null,null,null,_.H,_.g)),t["\u0275did"](6,49152,null,0,u.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{size:[0,"size"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,En)),t["\u0275did"](8,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,2,0,l.sectionsHeaders),n(e,6,0,"12"),n(e,8,0,!l.disableActions)}),null)}function Tn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"ion-list",[],null,null,null,_.Q,_.o)),t["\u0275did"](1,49152,null,0,u.O,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](2,0,null,0,1,"h3",[["class","no-data"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["No Question for this survey"]))],null,null)}function Dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,kn)),t["\u0275did"](1,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Tn)),t["\u0275did"](3,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,1,0,0!=l.objectKeys(l.questions).length),n(e,3,0,0==l.objectKeys(l.questions).length)}),null)}var qn=l("XNiG"),jn=l("cp0P");class Vn{constructor(n,e,l,t,i,o,u){this.syncService=n,this.activeRoute=e,this.shared=l,this.odoo=t,this.utils=i,this.router=o,this.datePipe=u,this.questionsObj={},this.headers=[],this.dataLoaded=!1,this.templateIndex=-1,this.$subs=[],this.unitName="",this.disblaySurvey=!1,this.isSubmit=!1,this.unSubTemp=new qn.a,this.answersVal=[],this.isChanged=!1}ionViewWillEnter(){this.type=this.activeRoute.snapshot.paramMap.get("type"),this.caseId=this.activeRoute.snapshot.paramMap.get("id");const n=this.shared.userData.subscribe(n=>{this.utils.showSpinner(),this.caseId?Object(jn.a)({case:this.odoo.getSurveillanceCaseById(this.caseId)}).subscribe(n=>{if(this.case=n.case,n.case.json_data){let e=JSON.parse(n.case.json_data);this.answersVal=e.q_list}else this.answersVal=[];this.utils.hideSpinner(),setTimeout(()=>this.getTemp(),100)}):this.getTemp()});this.$subs.push(n)}getInfo(n){return this.case&&Array.isArray(this.case[n])?this.case[n][0]:null}initPathogens(n){this.syncService.pathogens.next({pathogens:n.p_list,q_keys:n.key_list})}getTemp(){this.utils.showSpinner();const n=this.odoo.getTemplates(this.type).subscribe(n=>{let e;if("ICU"==this.type)e=n.data["ICU TEMPLATE"];else{if("SSI"!=this.type)return void alert("no template");e=n.data["SSI TEMPLATE"]}this.initPathogens(e),this.temp={name:e.name,type:e.type||this.case.survey_type,questions:e.q,temp_id:e.temp_id,hosp:this.activeRoute.snapshot.paramMap.get("hospital_code")||this.getInfo("Hospital"),unit:this.activeRoute.snapshot.paramMap.get("unit_code")||this.getInfo("unit_name"),univers:this.activeRoute.snapshot.queryParamMap.get("univ")||!1},this.caseId&&this.temp.questions.forEach(n=>{let e=this.answersVal.find(e=>e.key==n.key);e&&(n.answer=e.answer,n.line_id=e.line_id,n.show="True"==e.show)}),this.setupAdd(),this.utils.hideSpinner()});this.$subs.push(n),this.getRules()}setupAdd(){this.unitCode=this.activeRoute.snapshot.paramMap.get("unit_code");let n,e=[];"ICU"==this.type?(this.utils.units.forEach(n=>{n.id==this.unitCode&&(this.unitName=n.name),e.push(n.name)}),n=this.temp):"SSI"==this.type?("inpatient"==localStorage.getItem("SSIType")&&this.utils.units.forEach(n=>{n.id==this.unitCode&&(this.unitName=n.name),e.push(n.name)}),n=this.temp):alert("no template found"),this.templeate={name:this.temp.name,units:e,questions:this.temp.questions,type:this.type,patientName:this.activeRoute.snapshot.paramMap.get("patient_number"),patientNumber:this.activeRoute.snapshot.paramMap.get("patient_number")||this.getStrValue("patient_name"),hosp:this.activeRoute.snapshot.paramMap.get("hospital_code")||this.getInfo("Hospital"),unit:this.activeRoute.snapshot.paramMap.get("unit_code")||this.getInfo("unit_name"),univers:this.activeRoute.snapshot.paramMap.get("unvcode")||this.getInfo("University"),hospCode:this.hospitalCode,status:"draft",temp_id:this.temp.temp_id},this.isSubmit=!1,this.unSubTemp.next(),this.setupTemp()}getStrValue(n){return this.case&&this.case[n]?this.case[n]:null}setupTemp(){let n;this.questionsObj={},this.headers=[],this.templeate.questions.forEach((e,l)=>{if("False"==e.show&&(e.show=!1),"True"==e.show&&(e.show=!0),"Section"==e.type?(n=l,e.index=l,e.open=!1,this.headers.push(Object.assign({},e))):e.headerIndex=n,0!=e.key&&"False"!=e.key){let n=this.templateAnswers?this.templateAnswers.find(n=>n.key==e.key):null;this.questionsObj[e.key]=n?Object.assign({},e,{listIndex:l},n):Object.assign({},e,{listIndex:l})}0!=this.headers.length&&(this.headers[0].open=!0)}),this.activeRoute.snapshot.paramMap.get("index")||"Needle"==this.type||this.caseId||(this.questionsObj.p_number.answer=this.activeRoute.snapshot.paramMap.get("patient_number")),"ICU"==this.type&&(this.questionsObj.icu_admit.answer_list=this.templeate.units),"ICU"!=this.type||this.activeRoute.snapshot.paramMap.get("id")||this.caseId||(this.questionsObj.icu_admit.answer=this.unitName),"SSI"==this.type&&"inpatient"==localStorage.getItem("SSIType")&&(this.questionsObj.ward_admit.answer_list=this.templeate.units),"SSI"==this.type&&"inpatient"==localStorage.getItem("SSIType")&&!this.activeRoute.snapshot.paramMap.get("id")&&this.caseId&&(this.questionsObj.ward_admit.answer=this.unitName),this.dataLoaded=!0,this.removeSubs()}getRules(){this.odoo.getRuleEngin(this.type).then(n=>{let e=JSON.parse(JSON.stringify(n))[this.type];this.ruleBaseEngin=e.questionRules})}onSaveQuestions(n){return P.__awaiter(this,void 0,void 0,(function*(){if(!n.close)return;let e=n.questions,l={data_type:"create",state:"confirm",temp_id:!!this.temp.temp_id&&this.temp.temp_id,patient_name:e.p_name1.answer+" "+e.p_name2.answer+" "+e.p_name3.answer,patient_num:!!e.p_number.answer&&e.p_number.answer,template_name:this.temp.name,univers:!!this.temp.univers&&parseInt(this.temp.univers),hosp:!!this.temp.hosp&&parseInt(this.temp.hosp),unit:!!this.temp.unit&&parseInt(this.temp.unit),type:this.temp.type,sync_on:`${(new Date).getFullYear()}-${((new Date).getMonth()+1).toString().length>1?(new Date).getMonth()+1:`0${(new Date).getMonth()+1}`}-${(new Date).getDate().toString().length>1?(new Date).getDate():`0${(new Date).getDate()}`}`,q_list:[],inf_type:e.infection_type?e.infection_type.answer:"",inf_device:e.infection_device?e.infection_device.answer:"",ward:e.ward?e.ward.answer:"",inpatient:e.p_surgical_op_q?e.p_surgical_op_q.answer:"",infection_device:e.infection_device?e.infection_device.answer:"",case_result:e.infection_location?e.infection_location.answer:"",operation_date:!!e.date_operation.show&&this.tryToConvertDate(e.date_operation?e.date_operation.answer:""),doi:!!e.doi.show&&this.tryToConvertDate(e.doi?e.doi.answer:""),operation:this.getOperation(e)};this.caseId&&(l.data_type="write",l.id=parseInt(this.caseId));let t=[];Object.keys(e).forEach(n=>{let i=e[n];0==i.answer&&(i.answer=i.answer.toString()),i.optional||i.answer||!i.show||t.push(i),"date"==i.questionType&&i.answer&&(i.answer=this.syncService.convertDate(i.answer)),"Section"==i.type&&(i.show=!0),i.show&&l.q_list.push({key:i.key,seq:i.seq,answer:i.answer?i.answer:"",show:i.show?"True":"False",line_id:i.line_id?i.line_id:"False"})}),t.length>0?this.utils.showAlert("Error","Please complete all questions"):(this.headers.forEach(n=>{l.q_list.push({key:n.key,seq:n.seq,answer:n.answer,show:"True",line_id:n.line_id?n.line_id:"False"})}),l.q_list.sort((n,e)=>n.seq-e.seq),this.utils.showSpinner(),this.odoo.createCase(l).subscribe(n=>{n?(this.utils.hideSpinner(),this.router.navigate(["/home/icu/list/"+this.type])):this.utils.showAlert("Error","Error in create case")}))}))}removeSubs(){this.$subs.forEach(n=>n.unsubscribe())}onBack(){if(this.isChanged){const n=this.syncService.icuAnswerUpdated.subscribe(e=>{e&&this.syncService.icuAnswerUpdated.next(!1),this.utils.popBack(),n&&n.unsubscribe()});this.$subs.push(n)}else this.utils.popBack()}ngOnDestroy(){this.removeSubs()}ionViewDidLeave(){this.removeSubs()}tryToConvertDate(n){return!isNaN(new Date(n).getTime())&&this.datePipe.transform(new Date(n),"yyyy-MM-dd")}getOperation(n){return n.surg_Cardiothoracic.answer?n.surg_Cardiothoracic.answer:n.surg_Vascular.answer?n.surg_Vascular.answer:n["surg_Obstetrics/Gynecology"].answer?n["surg_Obstetrics/Gynecology"].answer:n.surg_Urology.answer?n.surg_Urology.answer:n.surg_Orthopedics.answer?n.surg_Orthopedics.answer:n.surg_General.answer?n.surg_General.answer:n.surg_Neurosurgery.answer?n.surg_Neurosurgery.answer:"False"}}var $n=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ln(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-icu-questions",[],null,[[null,"onSaveQuestions"]],(function(n,e,l){var t=!0;return"onSaveQuestions"===e&&(t=!1!==n.component.onSaveQuestions(l)&&t),t}),Dn,pn)),t["\u0275did"](1,245760,null,0,cn.a,[v.a,a.m,a.a],{questions:[0,"questions"],hospitalCode:[1,"hospitalCode"],unitCode:[2,"unitCode"],sectionsHeaders:[3,"sectionsHeaders"],rules:[4,"rules"],type:[5,"type"],isSubmit:[6,"isSubmit"]},{onSaveQuestions:"onSaveQuestions"})],(function(n,e){var l=e.component;n(e,1,0,l.questionsObj,l.hospitalCode,l.unitCode,l.headers,l.ruleBaseEngin,l.type,l.isSubmit)}),null)}function An(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-header-card",[],null,[[null,"onClose"]],(function(n,e,l){var t=!0;return"onClose"===e&&(t=!1!==n.component.onBack()&&t),t}),C.b,C.a)),t["\u0275did"](1,114688,null,0,b.a,[v.a],{headerTitle:[0,"headerTitle"],customBack:[1,"customBack"]},{onClose:"onClose"}),(n()(),t["\u0275eld"](2,0,null,null,5,"ion-content",[],null,null,null,_.I,_.h)),t["\u0275did"](3,49152,null,0,u.u,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275and"](16777216,null,0,1,null,Ln)),t["\u0275did"](5,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](6,0,null,0,1,"app-footer",[],null,null,null,M.b,M.a)),t["\u0275did"](7,114688,null,0,N.a,[],null,null)],(function(n,e){var l=e.component;n(e,1,0,(l.caseId?"Edit":l.type)+" survey",!0),n(e,5,0,l.dataLoaded),n(e,7,0)}),null)}function Hn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"app-survey",[],null,null,null,An,$n)),t["\u0275prd"](512,null,s.DatePipe,s.DatePipe,[t.LOCALE_ID]),t["\u0275did"](2,180224,null,0,Vn,[Z.a,a.a,x.a,S.a,v.a,a.m,s.DatePipe],null,null)],null,null)}var Zn=t["\u0275ccf"]("app-survey",Vn,Hn,{},{},[]),Un=l("Ja9k"),Fn=t["\u0275crt"]({encapsulation:0,styles:[[".inputItem[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-right:2px;font-size:1rem;margin-bottom:5px;white-space:normal}.inputItem[_ngcontent-%COMP%]   .label-stacked[_ngcontent-%COMP%]{-webkit-transform:none!important;transform:none!important}.inputItem[_ngcontent-%COMP%]   .child-label[_ngcontent-%COMP%]{color:var(--background-color)!important;font-weight:700!important}.inputItem[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#000;padding:5px}ion-button[_ngcontent-%COMP%]{--ion-color-primary:#fff;border-radius:50px;border:1px solid var(--background-color);color:var(--background-color)}ion-button[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-left:10px;color:#d03000;font-weight:700;font-size:24px}ion-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.fixed-btn[_ngcontent-%COMP%]{position:fixed;bottom:5%;width:100%;left:5%}"]],data:{}});function zn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"ion-select-option",[],null,null,null,_.X,_.x)),t["\u0275did"](1,49152,null,0,u.ob,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{value:[0,"value"]},null),(n()(),t["\u0275ted"](2,0,[""," "]))],(function(n,e){n(e,1,0,e.context.$implicit.id)}),(function(n,e){n(e,2,0,e.context.$implicit.name)}))}function Bn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,13,"ion-item",[["class","inputItem"],["detail","false"]],null,null,null,_.N,_.m)),t["\u0275did"](1,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["\u0275eld"](2,0,null,0,2,"ion-label",[["class","child-label "]],null,null,null,_.O,_.n)),t["\u0275did"](3,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,[" Select Hospital "])),(n()(),t["\u0275eld"](5,0,null,0,8,"ion-select",[["interface","popover"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,e,l){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==t["\u0275nov"](n,6)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t["\u0275nov"](n,6)._handleChangeEvent(l.target)&&i),"ngModelChange"===e&&(i=!1!==(o.selectObj.hospitalCode=l)&&i),i}),_.Y,_.w)),t["\u0275did"](6,16384,null,0,u.Mb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,un.NG_VALUE_ACCESSOR,(function(n){return[n]}),[u.Mb]),t["\u0275did"](8,671744,null,0,un.NgModel,[[8,null],[8,null],[8,null],[6,un.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,un.NgControl,null,[un.NgModel]),t["\u0275did"](10,16384,null,0,un.NgControlStatus,[[4,un.NgControl]],null,null),t["\u0275did"](11,49152,null,0,u.nb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{interface:[0,"interface"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,zn)),t["\u0275did"](13,278528,null,0,s.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,e){var l=e.component;n(e,1,0,"false"),n(e,8,0,l.selectObj.hospitalCode),n(e,11,0,"popover"),n(e,13,0,l.configData.user_hospitals)}),(function(n,e){n(e,5,0,t["\u0275nov"](e,10).ngClassUntouched,t["\u0275nov"](e,10).ngClassTouched,t["\u0275nov"](e,10).ngClassPristine,t["\u0275nov"](e,10).ngClassDirty,t["\u0275nov"](e,10).ngClassValid,t["\u0275nov"](e,10).ngClassInvalid,t["\u0275nov"](e,10).ngClassPending)}))}function Qn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,17,"ion-item",[["class","inputItem"],["detail","false"]],null,null,null,_.N,_.m)),t["\u0275did"](1,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["\u0275eld"](2,0,null,0,2,"ion-label",[["class","child-label "]],null,null,null,_.O,_.n)),t["\u0275did"](3,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,[" Select SSI case type "])),(n()(),t["\u0275eld"](5,0,null,0,12,"ion-select",[["interface","popover"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,e,l){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==t["\u0275nov"](n,6)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t["\u0275nov"](n,6)._handleChangeEvent(l.target)&&i),"ngModelChange"===e&&(i=!1!==(o.selectObj.ssitype=l)&&i),i}),_.Y,_.w)),t["\u0275did"](6,16384,null,0,u.Mb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,un.NG_VALUE_ACCESSOR,(function(n){return[n]}),[u.Mb]),t["\u0275did"](8,671744,null,0,un.NgModel,[[8,null],[8,null],[8,null],[6,un.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,un.NgControl,null,[un.NgModel]),t["\u0275did"](10,16384,null,0,un.NgControlStatus,[[4,un.NgControl]],null,null),t["\u0275did"](11,49152,null,0,u.nb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{interface:[0,"interface"]},null),(n()(),t["\u0275eld"](12,0,null,0,2,"ion-select-option",[],null,null,null,_.X,_.x)),t["\u0275did"](13,49152,null,0,u.ob,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{value:[0,"value"]},null),(n()(),t["\u0275ted"](14,0,[""," "])),(n()(),t["\u0275eld"](15,0,null,0,2,"ion-select-option",[],null,null,null,_.X,_.x)),t["\u0275did"](16,49152,null,0,u.ob,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{value:[0,"value"]},null),(n()(),t["\u0275ted"](17,0,[""," "]))],(function(n,e){var l=e.component;n(e,1,0,"false"),n(e,8,0,l.selectObj.ssitype),n(e,11,0,"popover"),n(e,13,0,"inpatient"),n(e,16,0,"outpatient")}),(function(n,e){n(e,5,0,t["\u0275nov"](e,10).ngClassUntouched,t["\u0275nov"](e,10).ngClassTouched,t["\u0275nov"](e,10).ngClassPristine,t["\u0275nov"](e,10).ngClassDirty,t["\u0275nov"](e,10).ngClassValid,t["\u0275nov"](e,10).ngClassInvalid,t["\u0275nov"](e,10).ngClassPending),n(e,14,0,"inpatient"),n(e,17,0,"outpatient")}))}function Gn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"ion-select-option",[],null,null,null,_.X,_.x)),t["\u0275did"](1,49152,null,0,u.ob,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{value:[0,"value"]},null),(n()(),t["\u0275ted"](2,0,[""," "]))],(function(n,e){n(e,1,0,e.context.$implicit.id)}),(function(n,e){n(e,2,0,e.context.$implicit.name)}))}function Kn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,13,"ion-item",[["class","inputItem"],["detail","false"]],null,null,null,_.N,_.m)),t["\u0275did"](1,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["\u0275eld"](2,0,null,0,2,"ion-label",[["class","child-label "]],null,null,null,_.O,_.n)),t["\u0275did"](3,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,[" Select Unit "])),(n()(),t["\u0275eld"](5,0,null,0,8,"ion-select",[["interface","popover"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,e,l){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==t["\u0275nov"](n,6)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t["\u0275nov"](n,6)._handleChangeEvent(l.target)&&i),"ngModelChange"===e&&(i=!1!==(o.selectObj.unitCode=l)&&i),i}),_.Y,_.w)),t["\u0275did"](6,16384,null,0,u.Mb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,un.NG_VALUE_ACCESSOR,(function(n){return[n]}),[u.Mb]),t["\u0275did"](8,671744,null,0,un.NgModel,[[8,null],[8,null],[8,null],[6,un.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,un.NgControl,null,[un.NgModel]),t["\u0275did"](10,16384,null,0,un.NgControlStatus,[[4,un.NgControl]],null,null),t["\u0275did"](11,49152,null,0,u.nb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{interface:[0,"interface"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,Gn)),t["\u0275did"](13,278528,null,0,s.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,e){var l=e.component;n(e,1,0,"false"),n(e,8,0,l.selectObj.unitCode),n(e,11,0,"popover"),n(e,13,0,l.units)}),(function(n,e){n(e,5,0,t["\u0275nov"](e,10).ngClassUntouched,t["\u0275nov"](e,10).ngClassTouched,t["\u0275nov"](e,10).ngClassPristine,t["\u0275nov"](e,10).ngClassDirty,t["\u0275nov"](e,10).ngClassValid,t["\u0275nov"](e,10).ngClassInvalid,t["\u0275nov"](e,10).ngClassPending)}))}function Yn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,18,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Bn)),t["\u0275did"](2,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Qn)),t["\u0275did"](4,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Kn)),t["\u0275did"](6,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](7,0,null,null,11,"ion-item",[["class","inputItem"],["detail","false"]],null,null,null,_.N,_.m)),t["\u0275did"](8,49152,null,0,u.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{detail:[0,"detail"]},null),(n()(),t["\u0275eld"](9,0,null,0,2,"ion-label",[["class","addInput-Label child-label"],["position","stacked"]],null,null,null,_.O,_.n)),t["\u0275did"](10,49152,null,0,u.N,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{position:[0,"position"]},null),(n()(),t["\u0275ted"](-1,0,["Enter Patient number "])),(n()(),t["\u0275eld"](12,0,null,0,6,"ion-input",[["class","addInput"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,e,l){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==t["\u0275nov"](n,13)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t["\u0275nov"](n,13)._handleInputEvent(l.target)&&i),"ngModelChange"===e&&(i=!1!==(o.selectObj.paitentNum=l)&&i),i}),_.M,_.l)),t["\u0275did"](13,16384,null,0,u.Nb,[t.ElementRef],null,null),t["\u0275prd"](1024,null,un.NG_VALUE_ACCESSOR,(function(n){return[n]}),[u.Nb]),t["\u0275did"](15,671744,null,0,un.NgModel,[[8,null],[8,null],[8,null],[6,un.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,un.NgControl,null,[un.NgModel]),t["\u0275did"](17,16384,null,0,un.NgControlStatus,[[4,un.NgControl]],null,null),t["\u0275did"](18,49152,null,0,u.G,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{type:[0,"type"]},null)],(function(n,e){var l=e.component;n(e,2,0,l.configData.user_hospitals.length>1),n(e,4,0,"SSI"==l.type),n(e,6,0,("SSI"!=l.type||"inpatient"==l.selectObj.ssitype)&&l.units.length>1),n(e,8,0,"false"),n(e,10,0,"stacked"),n(e,15,0,l.selectObj.paitentNum),n(e,18,0,"text")}),(function(n,e){n(e,12,0,t["\u0275nov"](e,17).ngClassUntouched,t["\u0275nov"](e,17).ngClassTouched,t["\u0275nov"](e,17).ngClassPristine,t["\u0275nov"](e,17).ngClassDirty,t["\u0275nov"](e,17).ngClassValid,t["\u0275nov"](e,17).ngClassInvalid,t["\u0275nov"](e,17).ngClassPending)}))}function Jn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"ion-col",[["size","6"]],null,null,null,_.H,_.g)),t["\u0275did"](1,49152,null,0,u.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{size:[0,"size"]},null),(n()(),t["\u0275eld"](2,0,null,0,6,"ion-button",[["class","save-btn"],["expand","block"],["shape","round"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.add()&&t),t}),_.C,_.b)),t["\u0275did"](3,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{expand:[0,"expand"],shape:[1,"shape"]},null),(n()(),t["\u0275eld"](4,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Add"])),(n()(),t["\u0275eld"](6,0,null,0,2,"fa-icon",[["class","ng-fa-icon"],["slot","start"]],[[1,"title",0],[8,"innerHTML",1]],null,null,h.d,h.c)),t["\u0275did"](7,573440,null,0,m.c,[f.b,m.a,m.d,[2,m.i]],{icon:[0,"icon"]},null),t["\u0275pad"](8,2)],(function(n,e){n(e,1,0,"6"),n(e,3,0,"block","round");var l=n(e,8,0,"fal","check");n(e,7,0,l)}),(function(n,e){n(e,6,0,t["\u0275nov"](e,7).title,t["\u0275nov"](e,7).renderedIconHTML)}))}function Wn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Jn)),t["\u0275did"](2,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],(function(n,e){var l=e.component;n(e,2,0,(""!=l.selectObj.unitCode||"outpatient"==l.selectObj.ssitype)&&""!=l.selectObj.hospitalCode&&""!=l.selectObj.paitentNum)}),null)}function Xn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,8,"ion-col",[["size","6"]],null,null,null,_.H,_.g)),t["\u0275did"](1,49152,null,0,u.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{size:[0,"size"]},null),(n()(),t["\u0275eld"](2,0,null,0,6,"ion-button",[["class","save-btn"],["expand","block"],["shape","round"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.add()&&t),t}),_.C,_.b)),t["\u0275did"](3,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{expand:[0,"expand"],shape:[1,"shape"]},null),(n()(),t["\u0275eld"](4,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Add"])),(n()(),t["\u0275eld"](6,0,null,0,2,"fa-icon",[["class","ng-fa-icon"],["slot","start"]],[[1,"title",0],[8,"innerHTML",1]],null,null,h.d,h.c)),t["\u0275did"](7,573440,null,0,m.c,[f.b,m.a,m.d,[2,m.i]],{icon:[0,"icon"]},null),t["\u0275pad"](8,2)],(function(n,e){n(e,1,0,"6"),n(e,3,0,"block","round");var l=n(e,8,0,"fal","check");n(e,7,0,l)}),(function(n,e){n(e,6,0,t["\u0275nov"](e,7).title,t["\u0275nov"](e,7).renderedIconHTML)}))}function ne(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Xn)),t["\u0275did"](2,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](0,null,null,0))],(function(n,e){var l=e.component;n(e,2,0,""!=l.selectObj.univCode||""!=l.selectObj.hospitalCode)}),null)}function ee(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,19,"ion-content",[["padding",""]],null,null,null,_.I,_.h)),t["\u0275did"](1,49152,null,0,u.u,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),t["\u0275did"](2,16384,null,0,u.e,[t.ElementRef],null,null),(n()(),t["\u0275and"](16777216,null,0,1,null,Yn)),t["\u0275did"](4,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](5,0,null,0,14,"ion-row",[],null,null,null,_.T,_.s)),t["\u0275did"](6,49152,null,0,u.jb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](7,0,null,0,8,"ion-col",[["size","6"]],null,null,null,_.H,_.g)),t["\u0275did"](8,49152,null,0,u.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{size:[0,"size"]},null),(n()(),t["\u0275eld"](9,0,null,0,6,"ion-button",[["class","save-btn"],["expand","block"],["shape","round"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.close()&&t),t}),_.C,_.b)),t["\u0275did"](10,49152,null,0,u.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{expand:[0,"expand"],shape:[1,"shape"]},null),(n()(),t["\u0275eld"](11,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Close"])),(n()(),t["\u0275eld"](13,0,null,0,2,"fa-icon",[["class","ng-fa-icon"],["slot","start"]],[[1,"title",0],[8,"innerHTML",1]],null,null,h.d,h.c)),t["\u0275did"](14,573440,null,0,m.c,[f.b,m.a,m.d,[2,m.i]],{icon:[0,"icon"]},null),t["\u0275pad"](15,2),(n()(),t["\u0275and"](16777216,null,0,1,null,Wn)),t["\u0275did"](17,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,0,1,null,ne)),t["\u0275did"](19,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,4,0,l.configData),n(e,8,0,"6"),n(e,10,0,"block","round");var t=n(e,15,0,"fal","times-circle");n(e,14,0,t),n(e,17,0,"Needle"!=l.type),n(e,19,0,"Needle"==l.type)}),(function(n,e){n(e,13,0,t["\u0275nov"](e,14).title,t["\u0275nov"](e,14).renderedIconHTML)}))}function le(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-add-modal",[],null,null,null,ee,Fn)),t["\u0275did"](1,114688,null,0,E,[u.Hb,x.a,v.a,a.a,S.a],null,null)],(function(n,e){n(e,1,0)}),null)}var te=t["\u0275ccf"]("app-add-modal",E,le,{searchList:"searchList",type:"type"},{},[]);class ie{}var oe=l("MNke"),ue=l("pk6O"),ae=l("IP0z"),se=l("/HVE"),re=l("hOhj"),de=l("nciF"),ce=l("mU/a");l.d(e,"IcuCasesModuleNgFactory",(function(){return pe}));var pe=t["\u0275cmf"](i,[],(function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[o.a,g,L,Zn,h.b,h.a,Un.a,te]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,s.NgLocalization,s.NgLocaleLocalization,[t.LOCALE_ID,[2,s["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,un["\u0275angular_packages_forms_forms_o"],un["\u0275angular_packages_forms_forms_o"],[]),t["\u0275mpd"](4608,un.FormBuilder,un.FormBuilder,[]),t["\u0275mpd"](4608,u.b,u.b,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,u.Hb,u.Hb,[u.b,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,u.Kb,u.Kb,[u.b,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](5120,t.APP_INITIALIZER,(function(n,e,l){return[u.Pb(n,e,l)]}),[u.Ob,s.DOCUMENT,t.NgZone]),t["\u0275mpd"](1073742336,s.CommonModule,s.CommonModule,[]),t["\u0275mpd"](1073742336,a.n,a.n,[[2,a.s],[2,a.m]]),t["\u0275mpd"](1073742336,ie,ie,[]),t["\u0275mpd"](1073742336,un["\u0275angular_packages_forms_forms_d"],un["\u0275angular_packages_forms_forms_d"],[]),t["\u0275mpd"](1073742336,un.FormsModule,un.FormsModule,[]),t["\u0275mpd"](1073742336,un.ReactiveFormsModule,un.ReactiveFormsModule,[]),t["\u0275mpd"](1073742336,u.Eb,u.Eb,[]),t["\u0275mpd"](1073742336,m.j,m.j,[]),t["\u0275mpd"](1073742336,oe.b,oe.b,[]),t["\u0275mpd"](1073742336,ue.a,ue.a,[]),t["\u0275mpd"](1073742336,w.SharedModule,w.SharedModule,[]),t["\u0275mpd"](1073742336,ae.a,ae.a,[]),t["\u0275mpd"](1073742336,se.b,se.b,[]),t["\u0275mpd"](1073742336,re.ScrollingModule,re.ScrollingModule,[]),t["\u0275mpd"](1073742336,de.DropdownModule,de.DropdownModule,[]),t["\u0275mpd"](1073742336,ce.PaginatorModule,ce.PaginatorModule,[]),t["\u0275mpd"](1073742336,y.TableModule,y.TableModule,[]),t["\u0275mpd"](1073742336,i,i,[]),t["\u0275mpd"](1024,a.k,(function(){return[[{path:"",component:r,children:[{path:"list/:type",component:k},{path:"add/:type/:patient_number/:hospital_code/:unit_code",component:Vn},{path:"add/:type/:hospital_code/:unvcode",component:Vn},{path:"edit/:type/:index",component:Vn},{path:"edit-by-id/:type/:id",component:Vn},{path:"",redirectTo:"list",pathMatch:"full"}]}]]}),[]),t["\u0275mpd"](256,u.Ob,void 0,[])])}))},ooga:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return IcuQuestionsComponent}));var _services_util_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("EUE+"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("8Y7J");class IcuQuestionsComponent{constructor(n,e,l){this.utils=n,this.router=e,this.activeRoute=l,this.isSubmit=!1,this.onSaveQuestions=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter,this.automaticClose=!0,this.disableActions=!1}ngOnInit(){this.selectedQuestionObj=this.filterObject(this.questions,n=>n.headerIndex==this.sectionsHeaders[0].index),this.inti()}inti(){this.sectionsHeaders.map(n=>n.empty=!1),this.getSectionStauts(),this.swipeSectionsShow(),setTimeout(()=>{"SSI"!=this.type||this.activeRoute.snapshot.paramMap.get("id")||(this.questions.p_surgical_op_q.answer=localStorage.getItem("SSIType"),this.changeUsingRule())},10)}getSectionStauts(){this.sectionsHeaders.forEach(n=>{n.allSolved=this.checkSectionSolved(n.index)})}swipeSectionsShow(){this.sectionsHeaders.forEach(n=>{let e=this.filterObject(this.questions,e=>(e.show||"True"==e.show)&&e.headerIndex==n.index);n.empty=0==Object.keys(e).length})}checkSectionSolved(n){let e=this.filterObject(this.questions,e=>e.headerIndex==n),l=this.filterObject(e,n=>n.show||"True"==n.show);if(0==this.objectKeys(l).length)return!1;let t=this.filterObject(e,n=>(""==n.answer||null==n.answer)&&(n.show||"True"==n.show));return!(this.objectKeys(t).length>0)}ngOnDestroy(){this.questions={},this.sectionsHeaders=[]}objectKeys(n){return Object.keys(n)}toggleSection(n){if(0===n)return void(this.checkSectionSolved(this.sectionsHeaders[n].index)?this.openSection(n):this.utils.showAlert("Note","Please answer all Current section questions"));let e;for(let l=n-1;l>=0;l--)if(!this.sectionsHeaders[l].empty){e=l;break}this.checkSectionSolved(this.sectionsHeaders[e].index)?this.openSection(n):this.utils.showAlert("Note","Please answer all pervios section questions")}openSection(n){this.getSectionStauts(),this.sectionsHeaders[n].open=!this.sectionsHeaders[n].open,this.automaticClose&&this.sectionsHeaders[n].open&&this.sectionsHeaders.filter((e,l)=>l!=n).map(n=>n.open=!1),this.selectedQuestionObj=this.filterObject(this.questions,e=>e.headerIndex==this.sectionsHeaders[n].index),this.submitRequest(),setTimeout(()=>{this.scrollTo(n)},500)}scrollTo(n){let e=document.getElementById(n);e&&e.scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}onChange(n){this.questions[n.key].answer=n.answer,this.questions[n.key].show=n.show,this.changeUsingRule(),this.swipeSectionsShow()}changeUsingRule(){this.isSubmit||(this.runEngineFunction=function(questionObject){return eval(this.rules),questionObject},this.runEngineFunction(this.questions))}submitRequest(n=!1){this.onSaveQuestions.emit({questions:this.questions,close:n}),this.inti()}filterObject(n,e){return Object.keys(n).filter(l=>e(n[l])).reduce((e,l)=>(e[l]=n[l],e),{})}}}}]);